---
title: "The Limit Order Book"
author: "[GitHub Contributors](https://github.com/FinancialMarkets/5MinuteFinance/graphs/contributors)"
output: ioslides_presentation
logo: misq.png
css: 5min_mod.css
runtime: shiny
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = FALSE)
```

## The Limit Order Book

The *limit order book* is the list of orders (prices at which you can transact) for a given security.

-  Depending on the security, these orders may be on one exchange, or aggregated across many exchanges.

-  In the next slide is two visualizations of a stock's orderbook.  We'll use these to describe how an order book works.

<div class="MIfooter"><img src="mi.png" style="height:50px;"></div> 


##

```{r messsage=FALSE, warning=FALSE, echo = FALSE}
#{{{
library(orderbook)
library(shiny)
shinyUI(fluidPage(
    fluidRow(
        column(6, 
               renderPrint({
                   filename <- system.file("extdata",
                                           "sample.txt",
                                           package = "orderbook")
                   ob <- orderbook(file = filename)
                   ob <- read.orders(ob, 10000)
                   display(ob)
                   ob <<- ob
               })

               ),
        column(6,
               renderPlot({
                   plot(ob)
               })
               )
    )
)
)
#}}}
```

<div class="MIfooter"><img src="mi.png" style="height:50px;"></div>

## 


<!---
Commenting because added app with both buy and sell below.
## Market Buy

```{r messsage=FALSE, warning=FALSE, echo = FALSE}
#{{{
library(orderbook)
library(shiny)
inputPanel(
    numericInput("amount", "Number of Shares to Buy", value = 100)
    )
shinyUI(fluidPage(
    fluidRow(
        column(6, 
               renderPrint({
                   filename <- system.file("extdata",
                                           "sample.txt",
                                           package = "orderbook")
                   ob <- orderbook(file = filename)
                   ob <- read.orders(ob, 10000)
                   display(ob)
               })
               ),
        column(6,
               renderPrint({
                   if (input$amount <= 0) {
                       cat("Enter number of shares")
                       } else {
                       ob <- market.order(ob, input$amount, "BUY")
    display(ob)
                       }
               })
               )
    )
)
)
#}}}
```
-->

## Market Order

```{r messsage=FALSE, warning=FALSE, echo = FALSE}
#{{{
library(orderbook)
library(shiny)
inputPanel(
    numericInput("amount2", "Number of Shares to Buy", value = 100),
    radioButtons("typeBS2", "Buy or Sell", choices = c("Buy" = 1,
                                                      "Sell" = 2), selected = 1) 
    )
shinyUI(fluidPage(
    fluidRow(
        column(6, 
               renderPrint({
                   filename <- system.file("extdata",
                                           "sample.txt",
                                           package = "orderbook")
                   ob <- orderbook(file = filename)
                   ob <- read.orders(ob, 10000)
                   display(ob)
               })
               ),
        column(6,
               renderPrint({
                   if (input$amount2 <= 0) {
                       cat("Enter number of shares")
                   } else {
                     orderType <- switch(input$typeBS2, 
                                         "1" = "BUY",
                                         "2" = "SELL")
                     filename <- system.file("extdata",
                                             "sample.txt",
                                             package = "orderbook")
                     ob <- orderbook(file = filename)
                     ob <- read.orders(ob, 10000)
                     ob <- market.order(ob, input$amount2, orderType)
                     display(ob)
                   }
               })
               )
    )
)
)
#}}}
```


<div class="MIfooter"><img src="mi.png" style="height:50px;"></div> 

## Limit Order

```{r messsage=FALSE, warning=FALSE, echo = FALSE}
#{{{
library(orderbook)
library(shiny)
inputPanel(
    numericInput("amount3", "Number of Shares to Buy", value = 100),
    numericInput("limit3", "Limit Price", value = 11.37),
    radioButtons("typeBS3", "Buy or Sell", choices = c("Buy" = 1,
                                                      "Sell" = 2), selected = 1) 
    )
shinyUI(fluidPage(
    fluidRow(
        column(6, 
               renderPrint({
                   filename <- system.file("extdata",
                                           "sample.txt",
                                           package = "orderbook")
                   ob <- orderbook(file = filename)
                   ob <- read.orders(ob, 10000)
                   display(ob)
               })
               ),
        column(6,
               renderPrint({
                   if (input$amount2 <= 0) {
                       cat("Enter number of shares")
                   } else {
                     orderType3 <- switch(input$typeBS3, 
                                         "1" = "BID",
                                         "2" = "ASK")
                     filename <- system.file("extdata",
                                             "sample.txt",
                                             package = "orderbook")
                     ob <- orderbook(file = filename)
                     ob <- read.orders(ob, 10000)
                     ob <- add.order(ob, price = input$limit3, size = input$amount3, type = orderType3)
                     display(ob)
                   }
               })
               )
    )
)
)
#}}}
```



<div class="MIfooter"><img src="mi.png" style="height:50px;"></div> 

## Orderbook R Package

The interactive content in this presentation has used the [orderbook R package](https://cran.r-project.org/web/packages/orderbook/index.html).

-  A big thanks to the package authors for this great tool.


<div class="MIfooter"><img src="mi.png" style="height:50px;"></div> 


## Credits and Collaboration

Click [here](https://github.com/FinancialMarkets/5MinuteFinance/blob/master/Equity/limit_order_book/limit_order_book.Rmd) to see the code and collaborators for this presentation

If you would like to make any additions or corrections to this presentation, visit our [GitHub repository page](https://github.com/FinancialMarkets/5MinuteFinance#how-to-contribute) to learn more about how to contribute

- And a big thanks to the [Milken Institute Center for Financial Markets](http://www.milkeninstitute.org/centers/markets) for making this all possible!


<div class="MIfooter"><img src="mi.png" style="height:50px;"></div> 
